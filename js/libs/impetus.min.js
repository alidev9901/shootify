!function(e,t){"function"==typeof define&&define.amd?define(["exports","module"],t):"undefined"!=typeof exports&&"undefined"!=typeof module?t(0,module):(t(t={exports:{}},t),e.Impetus=t.exports)}(this,function(e,t){"use strict";function z(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("test",null,t)}catch(e){}return z=function(){return e},e}window.addEventListener("touchmove",function(){});t.exports=function R(e){function i(){document.removeEventListener("touchmove",u,!!z()&&{passive:!1}),document.removeEventListener("touchend",r),document.removeEventListener("touchcancel",s),document.removeEventListener("mousemove",u,!!z()&&{passive:!1}),document.removeEventListener("mouseup",r)}function o(){V.call(m,X,Y)}function t(e){var t;return"touchmove"===e.type||"touchstart"===e.type||"touchend"===e.type?{x:(t=e.targetTouches[0]||e.changedTouches[0]).clientX,y:t.clientY,id:t.identifier}:{x:e.clientX,y:e.clientY,id:null}}function n(e){e=t(e);I||P||(S=!(I=!0),T=e.id,L=M=e.x,b=g=e.y,D=[],d(L,b),i(),document.addEventListener("touchmove",u,!!z()&&{passive:!1}),document.addEventListener("touchend",r),document.addEventListener("touchcancel",s),document.addEventListener("mousemove",u,!!z()&&{passive:!1}),document.addEventListener("mouseup",r))}function u(e){e.preventDefault();e=t(e);I&&e.id===T&&(M=e.x,g=e.y,d(L,b),F||C(U),F=!0)}function r(e){e=t(e);I&&e.id===T&&s()}function s(){var e,t,n,o;I=!1,d(L,b),e=D[0],t=D[D.length-1],n=t.x-e.x,o=t.y-e.y,t=(t.time-e.time)/15/h,B=n/t||0,q=o/t||0,e=a(),(1<Math.abs(B)||1<Math.abs(q)||!e.inBounds)&&(S=!0,C(v)),i()}function d(e,t){for(var n=Date.now();0<D.length&&!(n-D[0].time<=100);)D.shift();D.push({x:e,y:t,time:n})}function U(){var e,t=M-L,n=g-b;X+=t*h,Y+=n*h,k?(0!==(e=a()).x&&(X-=t*c(e.x)*h),0!==e.y&&(Y-=n*c(e.y)*h)):a(!0),o(),L=M,b=g,F=!1}function c(e){return 5e-6*Math.pow(e,2)+1e-4*e+.55}function a(e){var t=0,n=0;return void 0!==y&&X<y?t=y-X:void 0!==w&&w<X&&(t=w-X),void 0!==x&&Y<x?n=x-Y:void 0!==E&&E<Y&&(n=E-Y),e&&(0!==t&&(X=0<t?y:w),0!==n)&&(Y=0<n?x:E),{x:t,y:n,inBounds:0===t&&0===n}}function v(){var e,t;S&&(X+=B*=j,Y+=q*=j,e=a(),Math.abs(B)>A||Math.abs(q)>A||!e.inBounds?(k?(0!==e.x&&(e.x*B<=0?B+=.04*e.x:(t=0<e.x?2.5:-2.5,B=.11*(e.x+t))),0!==e.y&&(e.y*q<=0?q+=.04*e.y:(t=0<e.y?2.5:-2.5,q=.11*(e.y+t)))):(0!==e.x&&(X=0<e.x?y:w,B=0),0!==e.y&&(Y=0<e.y?x:E,q=0)),o(),C(v)):S=!1)}var f=e.source,m=void 0===f?document:f,V=e.update,f=e.multiplier,h=void 0===f?1:f,f=e.friction,j=void 0===f?.92:f,f=e.initialValues,p=e.boundX,l=e.boundY,e=e.bounce,k=void 0===e||e;if(!(this instanceof R))throw new TypeError("Cannot call a class as a function");var y,w,x,E,L,b,M,g,T,B,q,X=0,Y=0,A=.3*h,F=!1,I=!1,P=!1,S=!1,D=[];if(!(m="string"==typeof m?document.querySelector(m):m))throw new Error("IMPETUS: source not found.");if(!V)throw new Error("IMPETUS: update function not defined.");f&&(f[0]&&(X=f[0]),f[1]&&(Y=f[1]),o()),p&&(y=p[0],w=p[1]),l&&(x=l[0],E=l[1]),m.addEventListener("touchstart",n),m.addEventListener("mousedown",n),this.destroy=function(){return m.removeEventListener("touchstart",n),m.removeEventListener("mousedown",n),i(),null},this.pause=function(){i(),P=!(I=!1)},this.resume=function(){P=!1},this.setValues=function(e,t){"number"==typeof e&&(X=e),"number"==typeof t&&(Y=t)},this.setMultiplier=function(e){A=.3*(h=e)},this.setBoundX=function(e){y=e[0],w=e[1]},this.setBoundY=function(e){x=e[0],E=e[1]}};var C=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}});